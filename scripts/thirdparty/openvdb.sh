#!/bin/bash
set -eo pipefail

SOURCE_DIR="$1"
BUILD_DIR="${2:-./openvdb_build}"

CMAKE_OPTIONS="${CMAKE_OPTIONS} \
  -D OPENVDB_ENABLE_UNINSTALL=OFF \
  -D OPENVDB_ENABLE_INSTALL=OFF \
  -D OPENVDB_CORE_SHARED=OFF \
  -D OPENVDB_CORE_STATIC=ON \
  -D OPENVDB_BUILD_BINARIES=OFF \
  -D OPENVDB_BUILD_VDB_PRINT=OFF \
  -D USE_BLOSC=OFF \
  -D USE_EXPLICIT_INSTANTIATION=OFF \
  -D Tbb_VERSION=2021.12 \
"

source "$( dirname $0 )"/functions.sh
build_install "${SOURCE_DIR}" "${BUILD_DIR}" "${CMAKE_OPTIONS}"
